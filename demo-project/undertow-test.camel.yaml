- restConfiguration:
    component: platform-http
    contextPath: /api
- rest:
    id: rest-test
    bindingMode: json
    delete:
      - id: delete-jira
        path: /jira/delete
        to: direct:jira-delete
    get:
      - id: get-test
        path: /users
        to: direct:direct-test
      - id: get-8fd6
        path: /jira/addcomment
        to: direct:jira-addcomment
      - id: get-1cfa
        path: /testing
        to: direct:test-call
      - id: get-4f3c
        path: /test/multi
        to: direct:test-multi
      - id: get-4fsd
        path: /ndb/*
        to: direct:ndb-software
    post:
      - id: get-8fd2
        path: /jira/addissue
        to: direct:jira-addissue
      - id: get-8fd3
        path: /jira/addissue/cpu
        to: direct:jira-increase-cpu
      - id: get-8fd3
        path: /jira/update
        to: direct:jira-update
      - id: post-attach
        path: /jira/attach
        to: direct:jira-attach
      - id: get-8fd4
        path: /jira/transition/update
        to: direct:jira-fetch
      - id: get-8fd56
        path: /jira/transition
        to: direct:jira-transition
      - id: get-8fd67
        path: /jira/transition/init
        to: direct:jira-transition-init
      - id: get-8fwe
        path: /jira/transition/ndb
        to: direct:jira-transition-ndb
      - id: get-webhook
        path: /jira/webhook
        to: direct:direct-webhook
      - id: get-webhook-1
        path: >-
          /nutanix/v3/blueprints/5d1d4765-f94e-abcb-6d82-7377046d0f24/simple_launch
        to: direct:direct-launcbp
      - id: get-webhook-2
        path: /nutanix/v3/action_rules/trigger
        to: direct:direct-trigger-playbook
      - id: get-8fd3
        path: /jira/update/transition
        to: direct:jira-update-transition
      - id: get-8fd3
        path: /ntnx/bp/list
        to: direct:ntnx-bplist
      - id: get-8fd7
        path: /jira/exec
        to: direct:jira-exec
      - id: get-8fd7
        path: /jira/exec/custom
        to: direct:jira-exec-custom
      - id: get-8fd12
        path: /ntnx/apps/list
        to: direct:ntnx-apps-list
      - id: post-4fda
        path: /jira/fetch
        to: direct:jira-fetch-test
      - id: post-4sfd
        path: /jira/fetch/only
        to: direct:jira-fetch-only
- route:
    id: route-test
    nodePrefixId: route-123
    from:
      id: direct-id
      uri: direct
      parameters:
        name: direct-test
      steps:
        - to:
            id: to-9250
            uri: undertow
            parameters:
              httpURI: https://jsonplaceholder.typicode.com/users?bridgeEndpoint=true
- route:
    id: jira-addissue
    from:
      id: from-ae7e
      uri: direct
      parameters:
        name: jira-addissue
      steps:
        - setHeader:
            id: setHeader-17f3
            name: ProjectKey
            expression:
              simple:
                id: simple-0187
                expression: PEG
        - setHeader:
            id: setHeader-d55e
            name: IssueTypeName
            expression:
              simple:
                id: simple-78d2
                expression: Task
        - setHeader:
            id: setHeader-c33a
            name: IssueSummary
            expression:
              simple:
                id: simple-c612
                expression: >-
                  Create VM : ${body[name]} Created Date : ${date:now:yyyy-MM-dd
                  HH:mm:ss}
        - setBody:
            id: setBody-e4af
            expression:
              simple:
                id: simple-10f4
                expression: >-
                  Detail VM: VM Name = ${body[vm_name]}, Project Name =
                  ${body[project_name]}, Bp template = rocky 8, Size =
                  ${body[size]}, Username = ${body[username]}, Password =
                  ${body[password]}
        - to:
            id: to-5ea6
            uri: jira
            parameters:
              type: addIssue
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - setHeader:
            id: setResponseCode
            name: CamelHttpResponseCode
            expression:
              constant:
                id: constant-8a55
                expression: "200"
        - log:
            id: log-e145
            message: "Issue created: ${body}"
- route:
    id: jira-increase-cpu
    from:
      id: from-6cb8
      uri: direct
      parameters:
        name: jira-increase-cpu
      steps:
        - setHeader:
            id: setHeader-2312
            name: ProjectKey
            expression:
              simple:
                id: simple-d22f
                expression: PEG
        - setHeader:
            id: setHeader-b062
            name: IssueTypeName
            expression:
              simple:
                id: simple-258a
                expression: Task
        - setHeader:
            id: setHeader-b35c
            name: IssueSummary
            expression:
              simple:
                id: simple-c612
                expression: >-
                  Increase CPU VM ID : ${body[name]} on ${date:now:yyyy-MM-dd
                  HH:mm:ss}
        - setBody:
            id: setBody-2efd
            expression:
              simple:
                id: simple-e436
                expression: >-
                  VM Name : ${body[name]}, IP : ${body[ip]}, Existing CPU :
                  ${body[cpu_count]}, CPU usage : ${body[cpu_metric]}, Monitor
                  Duration : ${body[monitor_duration]}, Monitor Agregate :
                  ${body[monitor_aggregate]}, Playbook ID : ${body[id]}, Allert
                  UUID : ${body[alert_uuid]}, Allert Name : ${body[alert_name]}
        - to:
            id: to-fdfa
            uri: jira
            parameters:
              type: addIssue
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - setHeader:
            id: setHeader-86c5
            name: CamelHttpResponseCode
            expression:
              constant:
                id: constant-b30b
                expression: "200"
        - log:
            id: log-312e
            message: "Increase CPU Issue: ${body}"
- route:
    id: jira-addcomment
    from:
      id: from-5d61
      uri: direct
      parameters:
        name: jira-addcomment
      steps:
        - setHeader:
            id: setHeader-17f4
            name: IssueKey
            expression:
              simple:
                id: simple-0187
                expression: PEG-2
        - setBody:
            id: setBody-8e30
            expression:
              constant:
                id: constant-10f4
                expression: Testing Comment dulu aja.
        - to:
            id: to-b9c8
            uri: jira
            parameters:
              type: addComment
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-4e91
            message: "Issue created: ${body}"
- route:
    id: jira-attach
    from:
      id: from-edae
      uri: direct
      parameters:
        name: jira-attach
      steps:
        - setHeader:
            id: setHeader-351f
            name: IssueKey
            expression:
              simple:
                id: simple-1ada
                expression: PEG-2
        - to:
            id: to-07ba
            uri: jira
            parameters:
              type: attach
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-13f1
            message: "Issue created: ${body}"
- route:
    id: jira-fetch
    from:
      id: from-615e
      uri: direct
      parameters:
        name: jira-fetch
      steps:
        - process:
            id: process-ca8d
            ref: SetPropertyProcessor
        - setHeader:
            id: setHeader-9efe
            name: IssueKey
            expression:
              simple:
                id: simple-ca1c
                expression: ${body[cardId]}
        - to:
            id: to-8207
            uri: jira
            parameters:
              type: FETCHISSUE
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - process:
            id: process-22aa
            ref: FetchIssueProcessor
        - to:
            id: to-2084
            uri: jira
            parameters:
              type: UPDATEISSUE
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-d8eb
            message: "update : ${body}"
        - process:
            id: process-22aa
            ref: SetUpdateBodyProcessor
        - to:
            id: to-eff3
            uri: jira
            parameters:
              type: transitionIssue
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
- route:
    id: jira-fetch-only
    from:
      id: from-1c39
      uri: direct
      parameters:
        name: jira-fetch-only
      steps:
        - setHeader:
            id: setHeader-dfd8
            name: IssueKey
            expression:
              simple:
                id: simple-9639
                expression: ${body[cardId]}
        - to:
            id: to-a3c0
            uri: jira
            parameters:
              type: FETCHISSUE
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-d30a
            message: response ${body}
- route:
    id: jira-fetch-test
    from:
      id: from-d592
      uri: direct
      parameters:
        name: jira-fetch-test
      steps:
        - setHeader:
            id: setHeader-a49e
            name: IssueKey
            expression:
              simple:
                id: simple-f60d
                expression: ${body[cardId]}
        - to:
            id: to-cd34
            uri: jira
            parameters:
              type: FETCHISSUE
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - process:
            id: process-3b84
            ref: FetchIssueNDBProcessor
        - removeHeader:
            id: removeHeader-823b
            name: CamelHttpPath
        - setHeader:
            id: setHeader-405e
            name: CamelHttpMethod
            expression:
              constant:
                id: constant-e218
                expression: GET
        - setHeader:
            id: setHeader-eebc
            name: Authorization
            expression:
              simple:
                id: simple-8a5c
                expression: Basic YWRtaW46SGVsaW9zMTIzIQ==
        - setBody:
            id: setBody-952f
            expression:
              constant:
                id: constant-f22c
                expression: "{}"
        - to:
            id: to-073c
            uri: netty-http
            parameters:
              protocol: https
              host: 10.8.135.235
              port: "443"
              path: era/v0.9/dbservers
              bridgeEndpoint: true
        - process:
            id: process-c697
            ref: ByteToStringProcessor
        - log:
            id: log-924e
            message: response ${body}
        - removeHeader:
            id: removeHeader-aa24
            name: Content-Encoding
        - process:
            id: process-6c0c
            ref: ProcessNdbListProcessor
- route:
    id: jira-transition
    from:
      id: from-cdf0
      uri: direct
      parameters:
        name: jira-transition
      steps:
        - setHeader:
            id: setHeader-6f92
            name: IssueKey
            expression:
              simple:
                id: simple-3c83
                expression: ${body[cardId]}
        - setHeader:
            id: setHeader-7f5d
            name: IssueTransitionId
            expression:
              simple:
                id: simple-d9f7
                expression: "5"
        - setBody:
            id: setBody-ddfb
            expression:
              constant:
                id: constant-e1e9
                expression: On create VM transition to Done.
        - to:
            id: to-0e69
            uri: jira
            parameters:
              type: transitionIssue
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-7341
            message: "transition : ${body}"
- route:
    id: jira-transition-init
    from:
      id: from-e8b8
      uri: direct
      parameters:
        name: jira-transition-init
      steps:
        - setHeader:
            id: setHeader-aef1
            name: IssueKey
            expression:
              simple:
                id: simple-71f1
                expression: ${body[cardId]}
        - setHeader:
            id: setHeader-79c5
            name: IssueTransitionId
            expression:
              simple:
                id: simple-fb04
                expression: "2"
        - setBody:
            id: setBody-44f3
            expression:
              constant:
                id: constant-4516
                expression: On create VM transition from todo.
        - to:
            id: to-63db
            uri: jira
            parameters:
              type: transitionIssue
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-23f2
            message: "transition : ${body}"
- route:
    id: jira-transition-ndb
    from:
      id: from-1e27
      uri: direct
      parameters:
        name: jira-transition-ndb
      steps:
        - process:
            id: process-9c60
            ref: ReceiveNdbCallback
        - to:
            id: to-40e6
            uri: jira
            parameters:
              type: FETCHISSUE
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - process:
            id: process-3923
            ref: FetchIssueNDBProcessor
        - removeHeader:
            id: removeHeader-1e61
            name: CamelHttpPath
        - setHeader:
            id: setHeader-55db
            name: CamelHttpMethod
            expression:
              constant:
                id: constant-a2fa
                expression: GET
        - setHeader:
            id: setHeader-1c70
            name: Authorization
            expression:
              simple:
                id: simple-9eb0
                expression: Basic YWRtaW46SGVsaW9zMTIzIQ==
        - setBody:
            id: setBody-0c58
            expression:
              constant:
                id: constant-e929
                expression: "{}"
        - to:
            id: to-e979
            uri: netty-http
            parameters:
              protocol: https
              host: 10.8.135.235
              port: "443"
              path: era/v0.9/dbservers
              bridgeEndpoint: true
        - process:
            id: process-9ce2
            ref: ByteToStringProcessor
        - log:
            id: log-e197
            message: response ${body}
        - removeHeader:
            id: removeHeader-f1b5
            name: Content-Encoding
        - process:
            id: process-c50f
            ref: ProcessNdbListProcessor
        - to:
            id: to-9d31
            uri: jira
            parameters:
              type: UPDATEISSUE
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - setHeader:
            id: setHeader-a007
            name: IssueKey
            expression:
              simple:
                id: simple-9f67
                expression: ${exchangeProperty[cardId]}
        - setHeader:
            id: setHeader-8ba6
            name: IssueTransitionId
            expression:
              simple:
                id: simple-e1f3
                expression: "5"
        - to:
            id: to-b72c
            uri: jira
            parameters:
              type: transitionIssue
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-43cc
            message: "transition NDB : ${body}"
- route:
    id: jira-delete
    from:
      id: from-fc7d
      uri: direct
      parameters:
        name: jira-delete
      steps:
        - setHeader:
            id: setHeader-4d9c
            name: IssueKey
            expression:
              simple:
                id: simple-47e3
                expression: PEG-2
        - to:
            id: to-23f1
            uri: jira
            parameters:
              type: DELETEISSUE
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-37c4
            message: "delete : ${body}"
- route:
    id: jira-update
    from:
      id: from-5bf8
      uri: direct
      parameters:
        name: jira-update
      steps:
        - setHeader:
            id: setHeader-ec46
            name: IssueKey
            expression:
              simple:
                id: simple-e7df
                expression: PEG-36
        - setHeader:
            id: setHeader-ec41
            name: IssueSummary
            expression:
              simple:
                id: simple-179e
                expression: summary testing
        - setBody:
            id: setBody-e764
            expression:
              simple:
                id: simple-a2f6
                expression: testing description from body ${body[description]}
        - to:
            id: to-5371
            uri: jira
            parameters:
              type: UPDATEISSUE
              jiraUrl: https://pocntnx46.atlassian.net
              username: pocntnx46@gmail.com
              password: >-
                ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        - log:
            id: log-1fcb
            message: "update : ${body}"
- route:
    id: jira-watch-update
    from:
      id: from-f17e
      uri: jira
      parameters:
        jiraUrl: https://pocntnx46.atlassian.net
        username: pocntnx46@gmail.com
        password: >-
          ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
        type: watchUpdates
        jql: project=PEG
      steps:
        - log:
            id: log-1003
            message: "watch card : ${body}"
- route:
    id: jira-webhook
    from:
      id: from-6c2e
      uri: direct
      parameters:
        name: direct-webhook
      steps:
        - to:
            id: to-45aa
            uri: kamelet:json-serialize-action
        - to:
            id: to-b9cf
            uri: kamelet:json-deserialize-action
        - process:
            id: process-bd01
            ref: SetValueProcessor
        - choice:
            id: choice-71f9
            description: check if the card transition from create vm to done
            when:
              - id: when-3e0asdf
                expression:
                  simple:
                    id: simple-ac67
                    expression: ${header.isComplete} == 'true'
                steps:
                  - setHeader:
                      id: setHeader-f480
                      name: Content-Type
                      expression:
                        simple:
                          id: simple-cdb1
                          expression: application/json
                  - setHeader:
                      id: setHeader-3de3
                      name: Accept
                      expression:
                        simple:
                          id: simple-9956
                          expression: application/json
                  - setHeader:
                      id: setHeader-f805
                      name: Authorization
                      expression:
                        simple:
                          id: simple-6319
                          expression: Basic YWRtaW46SGVsaW9zMTIzIQ==
                  - removeHeader:
                      id: removeHeader-9bfa
                      name: CamelHttpPath
                  - log:
                      id: log-bd25
                      message: "Webhook Test : ${body[]}"
                  - choice:
                      id: choice-ef15
                      description: check if the card is for increasing vm cpu
                      when:
                        - id: when-809b
                          expression:
                            simple:
                              id: simple-3c91
                              expression: ${header.issuetypeName} == 'Task'
                          steps:
                            - process:
                                id: process-65f6
                                ref: PalaybookAlert
                            - setHeader:
                                id: setHeader-6538
                                name: CamelExecCommandArgs
                                expression:
                                  simple:
                                    id: simple-c359
                                    expression: ${header.execArgs}
                            - to:
                                id: to-f99e
                                uri: exec
                                parameters:
                                  executable: ansible-playbook
                                  workingDir: /karavan/playbook
                            - log:
                                id: log-1a14
                                message: ${body}
                        - id: when-63cf
                          expression:
                            simple:
                              id: simple-6d94
                              expression: ${header.issuetypeName} == 'NDB Provision'
                          steps:
                            - process:
                                id: process-2663
                                ref: NdbRequest
                            - setHeader:
                                id: setHeader-5fd3
                                name: CamelExecCommandArgs
                                expression:
                                  simple:
                                    id: simple-be60
                                    expression: ${header.execArgs}
                            - to:
                                id: to-3181w
                                uri: exec
                                parameters:
                                  executable: ansible-playbook
                                  workingDir: >-
                                    /karavan/ansible-role-create-db-from-ndb-4/tests
                            - log:
                                id: log-1a11
                                message: "Exec Output: ${body} - Headers: ${headers}"
                      otherwise:
                        id: otherwise-cf67
                        steps:
                          - process:
                              id: process-98d0
                              ref: StringExecFormat
                          - setHeader:
                              id: setHeader-62bf
                              name: CamelExecCommandArgs
                              expression:
                                simple:
                                  id: simple-306e
                                  expression: ${header.execArgs}
                          - choice:
                              id: choice-2425
                              when:
                                - id: when-db09
                                  expression:
                                    simple:
                                      id: simple-219b
                                      expression: ${header.isCustom} == 'true'
                                  steps:
                                    - log:
                                        id: log-041a
                                        message: masuk ke Custom Vm
                                    - to:
                                        id: to-c868
                                        uri: exec
                                        parameters:
                                          workingDir: >-
                                            /karavan/ansible-role-launch-blueprint/tests
                                          executable: ansible-playbook
                              otherwise:
                                id: otherwise-3dc7
                                steps:
                                  - log:
                                      id: log-2453
                                      message: masuk ke Creation Vm (template)
                                  - to:
                                      id: to-b8f2
                                      uri: exec
                                      parameters:
                                        executable: ansible-playbook
                                        workingDir: /karavan/playbook
                          - log:
                              id: log-9d06
                              message: ${body}
            otherwise:
              id: otherwise-b58e
              steps:
                - choice:
                    id: choice-0267
                    when:
                      - id: when-43c6
                        expression:
                          simple:
                            id: simple-be53
                            expression: ${header.isToDo} == 'true'
                        steps:
                          - setHeader:
                              id: setHeader-76f0
                              name: Authorization
                              expression:
                                simple:
                                  id: simple-21a6
                                  expression: Basic YWRtaW46SGVsaW9zMTIzIQ==
                          - setHeader:
                              id: setHeader-5e17
                              name: CamelHttpMethod
                              expression:
                                constant:
                                  id: constant-6133
                                  expression: POST
                          - setHeader:
                              id: setHeader-497f
                              name: Content-Type
                              expression:
                                simple:
                                  id: simple-53f1
                                  expression: application/json
                          - removeHeader:
                              id: removeHeader-4ec6
                              name: CamelHttpPath
                          - setBody:
                              id: setBody-fcc6
                              expression:
                                simple:
                                  id: simple-e57c
                                  expression: |-
                                    {
                                        "length": 10,
                                        "offset": 0,
                                        "sort_attribute": "ASCENDING",
                                        "sort_order": "ASCENDING"
                                    }
                          - to:
                              id: to-52f1
                              uri: log
                              parameters:
                                loggerName: DEBUG?showBody=true&showHeaders=true
                          - to:
                              id: to-3a7d
                              uri: netty-http
                              parameters:
                                protocol: https
                                host: 10.8.130.168
                                port: "9440"
                                path: api/nutanix/v3/apps/list
                                bridgeEndpoint: true
                          - process:
                              id: process-41a4
                              ref: ByteToStringProcessor
                          - process:
                              id: process-983e
                              ref: ValidationCardProcessor
                          - choice:
                              id: choice-ddea
                              when:
                                - id: when-5d7e
                                  expression:
                                    simple:
                                      id: simple-2e4d
                                      expression: ${header.isAppnameExist} == 'false'
                                  steps:
                                    - setHeader:
                                        id: setHeader-50fa
                                        name: IssueKey
                                        expression:
                                          simple:
                                            id: simple-1fc5
                                            expression: ${exchangeProperty[issueKey]}
                                    - setHeader:
                                        id: setHeader-afb9
                                        name: IssueTransitionId
                                        expression:
                                          simple:
                                            id: simple-ec83
                                            expression: "2"
                                    - setBody:
                                        id: setBody-d95d
                                        expression:
                                          simple:
                                            id: simple-c008
                                            expression: ${null}
                                    - to:
                                        id: to-ee93
                                        uri: jira
                                        parameters:
                                          type: transitionIssue
                                          jiraUrl: https://pocntnx46.atlassian.net
                                          username: pocntnx46@gmail.com
                                          password: >-
                                            ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
                                    - log:
                                        id: log-c8d8
                                        message: "transition : ${body}"
                              otherwise:
                                id: otherwise-0f8c
                                steps:
                                  - setHeader:
                                      id: setHeader-d65b
                                      name: IssueKey
                                      expression:
                                        simple:
                                          id: simple-e961
                                          expression: ${exchangeProperty[issueKey]}
                                  - setBody:
                                      id: setBody-e5a6
                                      expression:
                                        simple:
                                          id: simple-5e13
                                          expression: >-
                                            Application name dengan nama
                                            '${exchangeProperty[appName]}' sudah
                                            digunakan.
                                  - to:
                                      id: to-0a01
                                      uri: jira
                                      parameters:
                                        type: addComment
                                        jiraUrl: https://pocntnx46.atlassian.net
                                        username: pocntnx46@gmail.com
                                        password: >-
                                          ATATT3xFfGF0tmezVRBtBlUH07obOpYjQr0gNIFGH_zxXMjvzFYCGnYfQ8ZWymdASV6_KnQA1e1WV9f0ptrt7Fqa_TYd5y2Ag4ptKCAD8469hjvW7R9Jx5Oq70vZFqYvrLPH-x6uATbBnEmf4K7GRtvql4X2_aNSCuMXuJdDL2qnrfaRVi901oU=0FB4A3D9
                                  - log:
                                      id: log-2086
                                      message: "Add Comment: ${body}"
                    otherwise:
                      id: otherwise-3c83
                      steps:
                        - log:
                            id: log-a2d1
                            message: Condition false
- route:
    id: nutanix-trigger-playbook
    from:
      id: from-5810
      uri: direct
      parameters:
        name: direct-trigger-playbook
      steps:
        - setHeader:
            id: setHeader-f9f3
            name: Accept
            expression:
              simple:
                id: simple-57b8
                expression: application/json
        - setHeader:
            id: setHeader-cc83
            name: Authorization
            expression:
              simple:
                id: simple-9398
                expression: Basic YWRtaW46SGVsaW9zMTIzIQ==
        - setHeader:
            id: setHeader-acdf
            name: Content-Type
            expression:
              simple:
                id: simple-c53d
                expression: application/json
        - process:
            id: process-b224
            ref: IncreaseCpuProcessor
        - to:
            id: to-777f
            uri: log
            parameters:
              loggerName: DEBUG?showBody=true&showHeaders=true
        - to:
            id: to-fa73
            uri: netty-http
            parameters:
              bridgeEndpoint: true
              protocol: https
              host: 10.8.130.168
              port: "9440"
              reuseAddress: false
- route:
    id: route-be66
    nodePrefixId: route-72b
    from:
      id: from-5865
      uri: direct
      parameters:
        name: jira-exec
      steps:
        - to:
            id: to-bc42
            uri: exec
            parameters:
              executable: ansible-playbook
              workingDir: /karavan/playbook
              args: >-
                launch_bluerprint.yml -e
                "{'pc_ip':'10.8.130.168','bp_id':'2397fd48-ac2d-47ee-a710-e4132cce72d2','basic_auth':'YWRtaW46SGVsaW9zMTIzIQ==','app_description':'testing_descripttion_ansible','app_name':'project-testing-dulu','app_profile_reference_name':'L','app_profile_reference_uuid':'7e3debbd-2e53-4557-ba99-832e2771251f','card_id':'PEG-93','username':'root','password':'password','vm_name':'testing-vm','substrate_list_uuid':'ec1f15b5-4f5e-4c5c-9ca6-b36ce33fdcd4'}"
        - to:
            id: to-5cbb
            uri: log
            parameters:
              loggerName: DEBUG?showBody=true&showHeaders=true
        - log:
            id: log-bc83
            message: ${body}
- route:
    id: route-3ecf
    nodePrefixId: route-72bsdf
    from:
      id: from-1030
      uri: direct
      parameters:
        name: jira-exec-custom
      steps:
        - process:
            id: process-ca03
            ref: AnsibleCustomProcessor
        - setHeader:
            id: setHeader-1bda
            name: CamelExecCommandArgs
            expression:
              simple:
                id: simple-cb50
                expression: ${header.execArgs}
        - to:
            id: to-2946
            uri: log
            parameters:
              loggerName: DEBUG?showBody=true&showHeaders=true
        - to:
            id: to-3181
            uri: exec
            parameters:
              executable: ansible-playbook
              workingDir: /karavan/ansible-role-launch-blueprint/tests
        - log:
            id: log-5176
            message: ${body}
- route:
    id: route-44c6
    nodePrefixId: route-bbb
    from:
      id: from-583e
      uri: direct
      parameters:
        name: ntnx-bplist
      steps:
        - setHeader:
            id: setHeader-62ab
            name: Content-Type
            expression:
              simple:
                id: simple-cdb1
                expression: application/json
        - setHeader:
            id: setHeader-1d60
            name: Accept
            expression:
              simple:
                id: simple-9956
                expression: application/json
        - setHeader:
            id: setHeader-d7a8
            name: Authorization
            expression:
              simple:
                id: simple-6319
                expression: Basic YWRtaW46SGVsaW9zMTIzIQ==
        - setHeader:
            id: setHeader-28ca
            name: CamelHttpCharacterEncoding
            expression:
              constant:
                id: constant-ed9e
                expression: UTF-8
        - removeHeader:
            id: removeHeader-b8b7
            name: CamelHttpPath
        - process:
            id: process-72d8
            ref: NutanixBpListProcessor
        - log:
            id: log-f6e6
            message: ${body}
        - to:
            id: to-c326
            uri: netty-http
            parameters:
              protocol: https
              host: 10.8.130.168
              port: "9440"
              path: api/nutanix/v3/blueprints/list
              bridgeEndpoint: true
        - process:
            id: process-8174
            ref: ByteToStringProcessor
        - removeHeader:
            id: removeHeader-57a4
            name: Content-Encoding
- route:
    id: route-7fd7
    from:
      id: from-017e
      uri: direct
      parameters:
        name: ntnx-apps-list
      steps:
        - setHeader:
            id: setHeader-667d
            name: Content-Type
            expression:
              simple:
                id: simple-8b70
                expression: application/json
        - setHeader:
            id: setHeader-c168
            name: Accept
            expression:
              simple:
                id: simple-50e3
                expression: application/json
        - setHeader:
            id: setHeader-fccb
            name: Authorization
            expression:
              simple:
                id: simple-4c59
                expression: Basic YWRtaW46SGVsaW9zMTIzIQ==
        - setHeader:
            id: setHeader-7469
            name: CamelHttpCharacterEncoding
            expression:
              constant:
                id: constant-4bc9
                expression: UTF-8
        - removeHeader:
            id: removeHeader-b8b9
            name: CamelHttpPath
        - setBody:
            id: setBody-8f3f
            expression:
              simple:
                id: simple-34eb
                expression: |-
                  {
                      "length": 10,
                      "offset": 0,
                      "sort_attribute": "ASCENDING",
                      "sort_order": "ASCENDING"
                  }
        - log:
            id: log-fa90
            message: ${body}
        - to:
            id: to-0ecb
            uri: netty-http
            parameters:
              protocol: https
              host: 10.8.130.168
              port: "9440"
              path: api/nutanix/v3/apps/list
              bridgeEndpoint: true
        - process:
            id: process-18d6
            ref: ByteToStringProcessor
        - removeHeader:
            id: removeHeader-23e7
            name: Content-Encoding
        - log:
            id: log-e390
            message: "application name validation : ${body}"
- route:
    id: route-b73c
    nodePrefixId: route-822
    from:
      id: from-aecd
      uri: direct
      parameters:
        name: test-call
      steps:
        - choice:
            id: choice-2b65
            when:
              - id: when-907c
                expression:
                  simple:
                    id: simple-ce59
                    expression: ${header.foo} == 'bar'
                steps:
                  - to:
                      id: to-b608
                      uri: direct
                      parameters:
                        name: test-receive
              - id: when-78f0
                expression:
                  simple:
                    id: simple-c255
                    expression: ${header.foo} == 'bar2'
                steps:
                  - to:
                      id: to-0b3a
                      uri: direct
                      parameters:
                        name: test-receive-2
            otherwise:
              id: otherwise-c0f4
              steps:
                - log:
                    id: log-acc9
                    message: "no condition "
- route:
    id: route-825c
    nodePrefixId: route-443
    from:
      id: from-03a7
      uri: direct
      parameters:
        name: test-multi
      steps:
        - multicast:
            id: multicast-06f4
            steps:
              - to:
                  id: to-5ef0
                  uri: direct
                  parameters:
                    name: test-receive
              - to:
                  id: to-df2e
                  uri: direct
                  parameters:
                    name: test-receive-2
        - to:
            id: to-fff6
            uri: direct
            parameters:
              name: test-receive
- route:
    id: route-d0cd
    nodePrefixId: route-dea
    from:
      id: from-7fd8
      uri: direct
      parameters:
        name: test-receive-2
      steps:
        - process:
            id: process-745f
            ref: NdbRequest
        - log:
            id: log-1974
            message: logger 3
- route:
    id: route-b53c
    nodePrefixId: route-bbb
    from:
      id: from-b046
      uri: direct
      parameters:
        name: ndb-software
      steps:
        - setHeader:
            id: setHeader-5f6a
            name: Content-Type
            expression:
              simple:
                id: simple-1cc8
                expression: application/json
        - setHeader:
            id: setHeader-b8da
            name: Accept
            expression:
              simple:
                id: simple-5b26
                expression: application/json
        - setHeader:
            id: setHeader-cb45
            name: Authorization
            expression:
              simple:
                id: simple-25d9
                expression: Basic YWRtaW46SGVsaW9zMTIzIQ==
        - setHeader:
            id: setHeader-d8c6
            name: CamelHttpCharacterEncoding
            expression:
              constant:
                id: constant-9b23
                expression: UTF-8
        - log:
            id: log-8493
            message: "http path  : ${header.CamelHttpPath}"
        - choice:
            id: choice-2488
            when:
              - id: when-5df5
                expression:
                  simple:
                    id: simple-d0cb
                    expression: ${header.CamelHttpPath} == '/api/ndb/softwares'
                steps:
                  - setHeader:
                      id: setHeader-1969
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-8ecb
                          expression: type=Software&all-profiles=true
              - id: when-5sdfe
                expression:
                  simple:
                    id: simple-e330
                    expression: ${header.CamelHttpPath} == '/api/ndb/softwares/postgres'
                steps:
                  - setHeader:
                      id: setHeader-5e20
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-c2b0
                          expression: >-
                            type=Software&all-profiles=true&engine=postgres_database
              - id: when-4rga
                expression:
                  simple:
                    id: simple-1716
                    expression: ${header.CamelHttpPath} == '/api/ndb/softwares/mysql'
                steps:
                  - setHeader:
                      id: setHeader-3c3a
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-f14c
                          expression: >-
                            type=Software&all-profiles=true&engine=mysql_database
              - id: when-aee7
                expression:
                  simple:
                    id: simple-aebb
                    expression: ${header.CamelHttpPath} == '/api/ndb/compute'
                steps:
                  - setHeader:
                      id: setHeader-0036
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-0fc1
                          expression: type=Compute&all-profiles=true
              - id: when-9aae
                expression:
                  simple:
                    id: simple-f2c2
                    expression: ${header.CamelHttpPath} == '/api/ndb/network'
                steps:
                  - setHeader:
                      id: setHeader-1f57
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-90eb
                          expression: type=Network&all-profiles=true
              - id: when-4ffr
                expression:
                  simple:
                    id: simple-7a7f
                    expression: ${header.CamelHttpPath} == '/api/ndb/network/postgres'
                steps:
                  - setHeader:
                      id: setHeader-160a
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-f54c
                          expression: >-
                            type=Network&all-profiles=true&engine=postgres_database
              - id: when-3jfir
                expression:
                  simple:
                    id: simple-c792
                    expression: ${header.CamelHttpPath} == '/api/ndb/network/mysql'
                steps:
                  - setHeader:
                      id: setHeader-13d3
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-b569
                          expression: type=Network&all-profiles=true&engine=mysql_database
              - id: when-1sdfa
                expression:
                  simple:
                    id: simple-73f5
                    expression: ${header.CamelHttpPath} == '/api/ndb/param/mysql'
                steps:
                  - setHeader:
                      id: setHeader-f669
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-489a
                          expression: >-
                            type=Database_Parameter&all-profiles=true&engine=mysql_database
              - id: when-2fdfa
                expression:
                  simple:
                    id: simple-0341
                    expression: ${header.CamelHttpPath} == '/api/ndb/param/postgres'
                steps:
                  - setHeader:
                      id: setHeader-46ed
                      name: CamelHttpQuery
                      expression:
                        simple:
                          id: simple-050b
                          expression: >-
                            type=Database_Parameter&all-profiles=true&engine=postgres_database
            otherwise:
              id: otherwise-a038
              steps:
                - setHeader:
                    id: setHeader-1bf9
                    name: CamelHttpQuery
                    expression:
                      simple:
                        id: simple-d276
                        expression: type=Database_Parameter&all-profiles=true
        - removeHeader:
            id: removeHeader-ce9c
            name: CamelHttpPath
        - log:
            id: log-df76
            message: request ${body}
        - to:
            id: to-0a31
            uri: netty-http
            parameters:
              protocol: https
              host: 10.8.135.235
              port: "443"
              path: era/v0.9/profiles
              bridgeEndpoint: true
        - log:
            id: log-df12
            message: response ${body}
        - process:
            id: process-a4c4
            ref: ByteToStringProcessor
        - removeHeader:
            id: removeHeader-441f
            name: Content-Encoding
